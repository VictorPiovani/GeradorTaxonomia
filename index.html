<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Taxonomia</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background-color: #f0f0f0;
        }
        .container {
            background: #fff;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        h1 {
            margin-bottom: 20px;
        }
        label {
            display: block;
            margin-top: 10px;
        }
        .checkbox-group {
            margin-top: 20px;
        }
        .checkbox-group label {
            display: flex;
            align-items: center;
        }
        .checkbox-group input {
            margin-right: 10px;
        }
        button {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        .result {
            margin-top: 20px;
            padding: 10px;
            background-color: #e0e0e0;
            border-radius: 4px;
        }
        .sub-category, .tb-group {
            margin-left: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Gerador de Taxonomia</h1>
        <label for="campaign-name">Nome da Campanha (NOME_REGUA_COMPLETO):</label>
        <input type="text" id="campaign-name" name="campaign-name" required>

        <label for="keywords">Palavras Chave (PALAVRAS_CHAVE):</label>
        <input type="text" id="keywords" name="keywords" required>

        <label for="additional-info">Informação Complementar (INFO_COMPLEMENTAR):</label>
        <input type="text" id="additional-info" name="additional-info" required>

        <div class="checkbox-group">
            <h3>Selecione as Taxonomias:</h3>
            <label><input type="checkbox" id="TB" name="taxonomia" value="TB" onclick="toggleTBGroup(this)"> Data Extensions (TB)</label>
            <div id="tb-group" class="tb-group" style="display: none;">
                <label for="tb-count">Quantidade de TBs:</label>
                <input type="number" id="tb-count" name="tb-count" min="1" value="1" onchange="generateTBTypes()">
                <div id="tb-types"></div>
            </div>
            <label><input type="checkbox" id="QR" name="taxonomia" value="QR"> Query (QR)</label>
            <label><input type="checkbox" id="JB" name="taxonomia" value="JB"> Journey Builder (JB)</label>
            <label><input type="checkbox" id="PR" name="taxonomia" value="PR" onclick="toggleSubcategories(this)"> Automation (PR)</label>
            <div id="subcategories" class="sub-category" style="display: none;">
                <label><input type="checkbox" id="IMPORT" name="sub-taxonomia" value="Import"> IMPORT (Import)</label>
                <label><input type="checkbox" id="DE" name="sub-taxonomia" value="DE"> DataExtract (DE)</label>
                <label><input type="checkbox" id="FT" name="sub-taxonomia" value="FT"> FileTransfer (FT)</label>
                <label><input type="checkbox" id="DF" name="sub-taxonomia" value="DF"> DataFilter (DF)</label>
                <label><input type="checkbox" id="Script" name="sub-taxonomia" value="Script"> Script (Script)</label>
            </div>
        </div>

        <button onclick="generateTaxonomy()">Gerar Taxonomia</button>

        <div id="result" class="result" style="display: none;">
            <h3>Taxonomias Geradas:</h3>
            <p id="result-text"></p>
        </div>
    </div>

    <script>
        function toggleTBGroup(checkbox) {
            const tbGroup = document.getElementById('tb-group');
            if (checkbox.checked) {
                tbGroup.style.display = 'block';
                generateTBTypes();
            } else {
                tbGroup.style.display = 'none';
                document.getElementById('tb-types').innerHTML = '';
            }
        }

        function generateTBTypes() {
            const tbCount = document.getElementById('tb-count').value;
            const tbTypesDiv = document.getElementById('tb-types');
            tbTypesDiv.innerHTML = '';

            for (let i = 1; i <= tbCount; i++) {
                const tbDiv = document.createElement('div');
                tbDiv.classList.add('tb-type');
                tbDiv.innerHTML = `
                    <h4>TB ${i}</h4>
                    <label><input type="checkbox" name="tb${i}-type" value="Import"> Import</label>
                    <label><input type="checkbox" name="tb${i}-type" value="Disparo"> Disparo</label>
                    <label><input type="checkbox" name="tb${i}-type" value="Histórico"> Histórico</label>
                `;
                tbTypesDiv.appendChild(tbDiv);
            }
        }

        function toggleSubcategories(checkbox) {
            const subcategories = document.getElementById('subcategories');
            if (checkbox.checked) {
                subcategories.style.display = 'block';
            } else {
                subcategories.style.display = 'none';
                const subCheckboxes = subcategories.querySelectorAll('input[type="checkbox"]');
                subCheckboxes.forEach((subCheckbox) => {
                    subCheckbox.checked = false;
                });
            }
        }

        function generateTaxonomy() {
            const campaignName = document.getElementById('campaign-name').value;
            const keywords = document.getElementById('keywords').value;
            const additionalInfo = document.getElementById('additional-info').value;

            const checkboxes = document.querySelectorAll('input[name="taxonomia"]:checked');
            const subCheckboxes = document.querySelectorAll('input[name="sub-taxonomia"]:checked');

            let selectedTaxonomies = [];

            checkboxes.forEach((checkbox) => {
                if (checkbox.value === 'TB') {
                    const tbCount = document.getElementById('tb-count').value;
                    for (let i = 1; i <= tbCount; i++) {
                        const tbTypes = document.querySelectorAll(`input[name="tb${i}-type"]:checked`);
                        tbTypes.forEach((tbType) => {
                            selectedTaxonomies.push(`${checkbox.value}_${tbType.value}_TB${i}`);
                        });
                    }
                } else if (checkbox.value === 'PR' && subCheckboxes.length > 0) {
                    subCheckboxes.forEach((subCheckbox) => {
                        selectedTaxonomies.push(`${checkbox.value}_${subCheckbox.value}`);
                    });
                } else {
                    selectedTaxonomies.push(checkbox.value);
                }
            });

            const resultDiv = document.getElementById('result');
            const resultText = document.getElementById('result-text');

            if (selectedTaxonomies.length > 0) {
                const taxonomies = selectedTaxonomies.map(taxonomy => `${taxonomy}_${campaignName}_${keywords}_${additionalInfo}`);
                resultText.innerHTML = taxonomies.join('<br>');
                resultDiv.style.display = 'block';
            } else {
                resultText.innerHTML = 'Nenhuma taxonomia selecionada.';
                resultDiv.style.display = 'block';
            }
        }
    </script>
</body>
</html>
